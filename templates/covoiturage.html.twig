{% extends 'base.html.twig' %}

{% block title %}Rechercher un covoiturage - Ecoride{% endblock %}

{% block bigtitle %}
    {# On donne un ID au formulaire pour que le JS puisse le trouver #}
    <form id="search-form">
        {% include 'bigtitle.html.twig' %}
    </form>
{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="row p-4" id="search-results-area">

        {# Message initial, sera caché après la première recherche #}
        <div id="initial-message" class="alert alert-info text-center mt-4" role="alert">
            <p><i class="bi bi-search"></i> Utilisez la barre de recherche ci-dessus pour trouver votre prochain covoiturage !</p>
        </div>

        {# Message si aucun résultat, sera affiché par le JS si besoin #}
        <div id="no-results-alert" class="alert alert-warning text-center mt-4 d-none" role="alert">
            <h5 class="mb-3">Aucun covoiturage ne correspond à votre recherche.</h5>
            <p id="next-available-text"></p>
            <a href="#" id="next-available-link" class="btn btn-outline-primary mt-2 d-none">Voir cette offre</a>
        </div>

        {# Bouton Filtres et titre, seront affichés par le JS si des résultats existent #}
        <div id="results-header" class="container mt-4 mb-2 d-flex justify-content-between align-items-center">
            <h5 id="results-title" class="mb-0 d-none">Résultats</h5>
            <button id="filter-button" class="btn btn-outline-primary d-none" type="button" data-bs-toggle="collapse" data-bs-target="#filter-box">
                <i class="bi bi-funnel-fill me-2"></i>Filtres
            </button>
            {# Le bouton mobile peut être géré de la même manière si nécessaire #}
        </div>

        {# Les filtres restent les mêmes... #}
        <div class="collapse" id="filter-box">
            {# ... Ton code pour les filtres ici ... #}
            <div class="d-flex justify-content-end mt-3">
                 <button id="apply-filters-btn" class="btn btn-primary px-4">Appliquer les filtres</button>
            </div>
        </div>
        
        {# Le conteneur où les résultats de la recherche seront injectés par le JS #}
        <div id="search-results-container" class="row">
            <!-- Les résultats de la recherche apparaîtront ici -->
        </div>

    </div>
</div>

{# Le script pour les sliders et étoiles peut rester ici #}
<script>
    // ... ton script existant pour les sliders et les étoiles ...
</script>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {# On inclut notre nouveau script de recherche #}
    <script src="{{ asset('js/search_carpool.js') }}"></script>
{% endblock %}